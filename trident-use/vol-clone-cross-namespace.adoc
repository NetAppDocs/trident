---
sidebar: sidebar
permalink: trident-use/vol-clone-cross-namespace.html
keywords: volref, volume reference, share, pvc, pv, nfs, namespace, cvna, cross-namespace, sharing, volumesnapshots
summary: Using Trident, you can create new volumes using existing volumes or volumesnapshots from a different namespace inside the same K8s cluster.
---

= Clone volumes across namespaces
:hardbreaks:
:icons: font
:imagesdir: ../media/

[.lead]
Using Trident, you can create new volumes using existing volumes or volumesnapshots from a different namespace inside the same Kubernetes cluster.

== Prerequisites


== Quick start

You can set up NFS volume sharing in just a few steps. 

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png[One] Configure source PVC to clone the volume

[role="quick-margin-para"]
The source namespace owner grants permission to access the data in the source PVC. 

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png[Two] Grant permission to create a CR in the destination namespace

[role="quick-margin-para"]
The cluster administrator grants permission to the owner of the destination namespace to create the TridentVolumeReference CR.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png[Three] Create TridentVolumeReference in the destination namespace

[role="quick-margin-para"]
The owner of the destination namespace creates the TridentVolumeReference CR to refer to the source PVC.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-4.png[Four] Create the subordinate PVC in the destination namespace

[role="quick-margin-para"]
The owner of the destination namespace creates PVC to clone the PVC from the source namespace.

== Configure the source and destination namespaces 
To ensure security, cloning volumes across namespaces requires collaboration and action by the source namespace owner, cluster administrator, and destination namespace owner. The user role is designated in each step.

.Steps

. *Source namespace owner:* Create the PVC (`pvc1`) in the source namespace (`namespace1`) that grants permission to share with the destination namespace (`namespace2`) using the `cloneToNamespace` annotation. 
+
----
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: pvc1
  namespace: namespace1
  annotations:
    trident.netapp.io/cloneToNamespace: namespace2
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: trident-csi
  resources:
    requests:
      storage: 100Gi
----
+
Trident creates the PV and its backend NFS storage volume.

. *Cluster admin:* Create the custom role and kubeconfig to grant permission to the destination namespace owner to create the TridentVolumeReference CR in the destination namespace(`namespace2`). 

. *Destination namespace owner:* Create a TridentVolumeReference CR in the destination namespace that refers to the source namespace `pvc1`.
+
----
apiVersion: trident.netapp.io/v1
kind: TridentVolumeReference
metadata:
  name: my-first-tvr
  namespace: namespace2
spec:
  pvcName: pvc1
  pvcNamespace: namespace1
----

. *Destination namespace owner:* Create a PVC (`pvc2`) in destination namespace (`namespace2`) using the `shareFromPVC` annotation to designate the source PVC.
+
----
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  annotations:
    trident.netapp.io/cloneFromPVC: pvc1
    trident.netapp.io/cloneFromNamespace: namespace1
  name: pvc2
  namespace: namespace2
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: trident-csi
  resources:
    requests:
      storage: 100Gi
----
+

.Results


== Limitations

*  
